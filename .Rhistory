opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
?addLegend
quantile(map_world@data$gdp_per_pop)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
colors = ~pal(sort(gdp_per_pop)),
labels = ~sort(gdp_per_pop),
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
pal <- colorQuantile('Greens', map_world@data$gdp_per_pop, n = 5)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
colors = ~pal(sort(gdp_per_pop)),
labels = ~sort(gdp_per_pop),
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
map_world@data$gdp_pop_grp <- quantile(map_world@data$gdp_per_pop)
tmp <- quantile(map_world@data$gdp_per_pop)
tmp
tmp %>% class
tmp[1]
tmp[[1]]
tmp[[]]
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
colors = ~pal(sort(gdp_per_pop)),
labels = ~sort(tmp),
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
tmp[[]]?cut
?cut
cut(map_world@data$gdp_per_pop)
tmp <- cut(map_world@data$gdp_per_pop, breaks = quantile(map_world@data$gdp_per_pop))
tmp
cut(map_world@data$gdp_per_pop, breaks = quantile(map_world@data$gdp_per_pop))
map_world@data$gdp_per_pop %>%
cut(breaks = quantile(.))
tmp <- map_world@data$gdp_per_pop %>% cut(breaks = quantile(.))
popup <- paste0("<b>", map_world@data$region_wb, "</b>:<br>",
map_world@data$admin, '<br>GDP per 100,000: $', map_world@data$gdp_per_pop)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
colors = ~pal(sort(gdp_per_pop)),
labels = ~sort(tmp),
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
colors = ~pal(sort(gdp_per_pop)),
labels = ~unique(sort(tmp)),
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
colors = ~pal(sort(gdp_per_pop)),
labels = ~sort(unique(tmp)),
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
map_world@data$gdp_pop_grp <- map_world@data$gdp_per_pop %>% cut(breaks = quantile(.))
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
colors = ~pal(sort(gdp_per_pop)),
labels = ~sort(unique(gdp_pop_grp)),
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
map_world@data$gdp_pop_grp
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
# colors = ~pal(sort(gdp_per_pop)),
# labels = ~sort(unique(gdp_pop_grp)),
pal = pal, values = values,
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
# colors = ~pal(sort(gdp_per_pop)),
# labels = ~sort(unique(gdp_pop_grp)),
pal = pal, values = gdp_per_pop,
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
# colors = ~pal(sort(gdp_per_pop)),
# labels = ~sort(unique(gdp_pop_grp)),
pal = pal, values = ~gdp_per_pop,
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
colors = ~pal(sort(gdp_per_pop)),
# labels = ~sort(unique(gdp_pop_grp)),
# pal = pal,
values = ~gdp_per_pop,
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
# colors = ~pal(sort(gdp_per_pop)),
# labels = ~sort(unique(gdp_pop_grp)),
pal = pal,
values = ~gdp_per_pop,
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# colors = ~unique(pal(sort(region_wb))),
# labels = ~unique(sort(region_wb)),
# colors = ~pal(sort(gdp_per_pop)),
# labels = ~sort(unique(gdp_pop_grp)),
pal = pal,
values = ~gdp_per_pop,
labFormat = function(type, cuts, p) {
n = length(cuts)
paste0(cuts[-n], " &ndash; ", cuts[-1])
},
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
pal <- colorQuantile('YlOrRd', map_world@data$gdp_per_pop, n = 5)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# for colorFactor
# colors = ~unique(pal(sort(region_wb))), labels = ~unique(sort(region_wb)),
# for colorQuantile
pal = pal, values = ~gdp_per_pop,
# below changes default from % to values
labFormat = function(type, cuts, p) {
n = length(cuts)
paste0(cuts[-n], " &ndash; ", cuts[-1])
},
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
pal <- colorFactor('Greens', unique(map_world@data$region_wb))
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
fillColor = ~pal(region_wb),
# fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# for colorFactor
colors = ~unique(pal(sort(region_wb))), labels = ~unique(sort(region_wb)),
# for colorQuantile
# pal = pal, values = ~gdp_per_pop,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
fillColor = ~pal(region_wb),
# fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# for colorFactor
# colors = ~unique(pal(sort(region_wb))), labels = ~unique(sort(region_wb)),
pal = pal, values = ~region_wb,
# for colorQuantile
# pal = pal, values = ~gdp_per_pop,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
fillColor = ~pal(region_wb),
# fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# pal = pal, values = ~region_wb,
pal = pal, values = ~gdp_per_pop,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# pal = pal, values = ~region_wb,
pal = pal, values = ~gdp_per_pop,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
pal <- colorQuantile('YlOrRd', map_world@data$gdp_per_pop, n = 5)
popup <- paste0("<b>", map_world@data$region_wb, "</b>:<br>",
map_world@data$admin, '<br>GDP per 100,000: $', map_world@data$gdp_per_pop)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# pal = pal, values = ~region_wb,
pal = pal, values = ~gdp_per_pop,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
pal <- colorQuantile('YlOrRd', map_world@data$gdp_per_pop, n = 8)
popup <- paste0("<b>", map_world@data$region_wb, "</b>:<br>",
map_world@data$admin, '<br>GDP per 100,000: $', map_world@data$gdp_per_pop)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# pal = pal, values = ~region_wb,
pal = pal, values = ~gdp_per_pop,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
pal <- colorQuantile('YlOrRd', map_world@data$gdp_per_pop)
popup <- paste0("<b>", map_world@data$region_wb, "</b>:<br>",
map_world@data$admin, '<br>GDP per 100,000: $', map_world@data$gdp_per_pop)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# pal = pal, values = ~region_wb,
pal = pal, values = ~gdp_per_pop,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
pal <- colorQuantile('YlOrRd', map_world@data$gdp_per_pop, n = 5)
popup <- paste0("<b>", map_world@data$region_wb, "</b>:<br>",
map_world@data$admin, '<br>GDP per 100,000: $', map_world@data$gdp_per_pop)
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5,
# fillColor = ~pal(region_wb),
fillColor = ~pal(gdp_per_pop),
popup = ~popup
) %>%
addLegend(position = 'bottomleft',
# pal = pal, values = ~region_wb,
pal = pal, values = ~gdp_per_pop,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(-0.118092, 51.509865, zoom = 3)
library(rgdal)
library(dplyr)
library(leaflet)
rgdal::ogrListLayers("data/BASEMAPDATA.gdb")
map_world <- rgdal::readOGR("data/BASEMAPDATA.gdb", "GLOBAL_ADM0")
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
# fillColor = ~pal(gdp_per_pop),
# popup = ~popup
fillOpacity = 0.5, smoothFactor = 0.5
)
map_world <- rgdal::readOGR("data/BASEMAPDATA.gdb", "AFRO_EMRO_ADM1")
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
# fillColor = ~pal(gdp_per_pop),
# popup = ~popup
fillOpacity = 0.5, smoothFactor = 0.5
)
map_world <- rgdal::readOGR("data/BASEMAPDATA.gdb", "AFRO_EMRO_ADM2")
leaflet(map_world) %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
# fillColor = ~pal(gdp_per_pop),
# popup = ~popup
fillOpacity = 0.5, smoothFactor = 0.5
)
map_world@data %>% head()
