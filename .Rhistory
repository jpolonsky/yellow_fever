leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolylines(data = map_world_lakes, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 0.1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 0.1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolylines(data = map_world_lakes, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 0.1, smoothFactor = 0.5
) %>%
addPolylines(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 0.1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolylines(data = map_world_lakes, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolylines(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolylines(data = map_world_lakes, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_lakes, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolylines(data = map_world_lakes, #fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, #fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolylines(data = map_world_lakes, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolylines(data = map_world_lakes, fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
)
leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolylines(data = map_world_lakes, fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
)
leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
# addPolylines(data = map_world_lakes, fillColor = 'lightgrey',
#             stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
#             fillOpacity = 1, smoothFactor = 0.5
# ) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black", noClip = TRUE,
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet(map_world_who) %>%
# addTiles() %>%
addPolygons(
stroke = TRUE, weight = 1, color = "#444444",
fillOpacity = 0.5, smoothFactor = 0.5
)
map_world_base@data %>% head
map_world_base@data$value <- nrow(map_world_base@data) %>% rnorm(mean = 100, sd = 70)
pal <- colorQuantile('YlOrRd', map_world_base@data$value)
popup <- paste0("<b>", map_world_base@data$id, "</b>:<br>", map_world_base@data$value)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, #color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, #color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, #color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, #color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, #color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addLegend(position = 'bottomleft',
pal = pal, values = ~value,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(12.862807, 30.217636, zoom = 4)
?addLegend
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addLegend(map = map_world_base,
position = 'bottomleft',
pal = pal, values = ~value,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(12.862807, 30.217636, zoom = 4)
pal
pal <- colorQuantile('YlOrRd', map_world_base@data$value)
popup <- paste0("<b>", map_world_base@data$id, "</b>:<br>", map_world_base@data$value)
popup
map_world_base@data$value <- nrow(map_world_base@data) %>% rnorm(mean = 100, sd = 70) %>% round
pal <- colorQuantile('YlOrRd', map_world_base@data$value)
popup <- paste0("<b>", map_world_base@data$id, "</b>:<br>", map_world_base@data$value)
popup
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addLegend(map = map_world_base,
position = 'bottomleft',
pal = pal, values = ~value,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addLegend(.,
position = 'bottomleft',
pal = pal, values = ~value,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addLegend(position = 'bottomleft',
pal = pal, values = ~value,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
)
pal <- colorQuantile('YlOrRd', map_world_base@data$value, n = 5)
pal
popup <- paste0("<b>", map_world_base@data$id, "</b>:<br>", map_world_base@data$value)
leaflet() %>%
addPolygons(
data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(
data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addLegend(
position = 'bottomleft',
pal = pal, values = ~map_world_base$value,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(12.862807, 30.217636, zoom = 4)
map_world_base$value
leaflet() %>%
addPolygons(
data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(
data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addLegend(
position = 'bottomleft',
pal = pal, values = map_world_base$value,
# below changes default from % to values
# labFormat = function(type, cuts, p) {
#   n = length(cuts)
#   paste0(cuts[-n], " &ndash; ", cuts[-1])
# },
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(
data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black",
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 1, smoothFactor = 0.5
) %>%
addPolygons(
data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addLegend(
position = 'bottomleft',
pal = pal, values = map_world_base$value,
## below changes default from % to values
labFormat = function(type, cuts, p) {
n = length(cuts)
paste0(cuts[-n], " &ndash; ", cuts[-1])
},
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(12.862807, 30.217636, zoom = 4)
leaflet() %>%
addPolygons(
data = map_world_base, #fillColor = 'lightgrey',
stroke = TRUE, weight = 1, color = "black", opacity = 1,
fillColor = ~pal(value),
popup = ~popup,
fillOpacity = 0.5, smoothFactor = 0.5
) %>%
addPolygons(
data = map_world_disputed, fillColor = 'steelblue',
stroke = TRUE, weight = 1, color = "black",
fillOpacity = 1, smoothFactor = 0.5
) %>%
addLegend(
position = 'bottomleft',
pal = pal, values = map_world_base$value,
## below changes default from % to values
labFormat = function(type, cuts, p) {
n = length(cuts)
paste0(cuts[-n], " &ndash; ", cuts[-1])
},
title = 'Legend',
na.label = 'No data',
opacity = .5
) %>%
setView(12.862807, 30.217636, zoom = 4)
library(dplyr)
library(ggplot2)
library(plotly)
source('code/functions_figures.R')
filename <- dir('data', full.names = TRUE) %>% stringr::str_subset('.mdb')
df <- Hmisc::mdb.get(filename) %>% tbl_df
df %>%
filter(FinalClassification == 1) %>%
count(Categorisation) %>%
mutate(freq = n / sum(n) * 100)
PlotBar(
data = df, xvar = 'Categorisation', yvar = 'FinalClassification',
fill = 'FinalClassification', yaxis = '# cases by final classification', colscheme = 'Blues'
)
df
df %>% nrow
df %>% glimpse()
??markdown
df %>%
filter(FinalClassification == 1) %>%
count(Categorisation) %>%
mutate(freq = n / sum(n) * 100)
df %>%
filter(FinalClassification == 1) %>%
count(Categorisation)
df %>% filter(Labid %in% c('16FJ2179'))
df %>% filter(Labid %in% c('RDC-TPA-YAL-16-002'))
df %>% filter(IdNumber %in% c('RDC-TPA-YAL-16-002'))
df %>% filter(IdNumber %in% c('RDC-TPA-YAL-16-002')) %>% glimaps
df %>% filter(IdNumber %in% c('RDC-TPA-YAL-16-002')) %>% glimpse()
df %>% filter(IdNumber %in% c('RDC-TPA-YAL-16-004')) %>% glimpse()
df %>% filter(IdNumber %in% c('RDC-SUB-BOM-16-007')) %>% glimpse()
df %>% filter(IdNumber %in% c('RDC-KWA-KAH-16-041')) %>% glimpse()
df %>% filter(IdNumber %in% c('RDC-SUB-BOM-16-007')) %>% glimpse()
df %>% filter(IdNumber %in% c('RDC-KWA-KAH-16-041')) %>% glimpse()
df %>% filter(IdNumber %in% c('RDC-KWA-KAH-16-007')) %>% glimpse()
df %>% filter(IdNumber %in% c('RDC-KWA-KDJ-16-007')) %>% glimpse()
df %>% filter(IdNumber %in% c('RDC-KWA-KAH-16-077')) %>% glimpse()
